import{c as v,a as r,b as g,s as y,r as t,o as h,l as S,d as b,e as B,f as i,g as c,h as d,i as l,j as w,k as D,m as I,n as a,p as E}from"./assets/firebase-api-96c3fee1.js";import{n as T}from"./assets/vendor-451a0b16.js";const q="/realtime-stopwatch/assets/edit-0c3c4362.svg";v();u();r("default_stopwatch_1");g("default_stopwatch_1");setInterval(()=>{const e=JSON.parse(localStorage.getItem("log")).user;y("default_stopwatch_1",{lastTime:Date.now(),user:e,isBusy:!0})},5e3);r("default_stopwatch_1");t.backBtn.addEventListener("click",h);t.logOutBtn.addEventListener("click",S);t.startBtn.addEventListener("click",N);t.stopBtn.addEventListener("click",H);t.stepsList.addEventListener("click",_);t.sendBtn.addEventListener("click",F);t.resetBtn.addEventListener("click",M);t.resetBackdrop.addEventListener("click",O);t.taskInput.addEventListener("input",()=>{t.taskInput.classList.remove("task-input-required")});t.taskForm.addEventListener("submit",P);t.navName.innerHTML=JSON.parse(localStorage.getItem("log")).user;b();B();async function N(){if(!localStorage.getItem("task")){t.taskInput.classList.add("task-input-required"),i("Please, enter the task","#task");return}const e=Date.now(),s=await c();t.taskInput.classList.remove("task-input-required"),d({...s,isStart:!0,start:e})}async function H(){const e=Date.now(),s=await c(),o=await l(),k=o.items.length>0?o.items.length+1:1,m=e-s.start,p=localStorage.getItem("task"),f=JSON.parse(localStorage.getItem("log")).user,L={id:T(),step:k,time:m,user:f,task:p};w(L),d({...s,isStart:!1,stop:e})}async function _(e){e.target.nodeName==="BUTTON"&&D(e.target.id)}function M(){t.resetBackdrop.classList.remove("visually-hidden"),document.querySelector("body").style.overflow="hidden",document.addEventListener("keydown",n)}function O(e){e.target.classList.contains("no-btn")||e.target.classList.contains("backdrop")?t.resetBackdrop.classList.add("visually-hidden"):e.target.classList.contains("yes-btn")&&(I(),t.resetBackdrop.classList.add("visually-hidden")),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",n)}function n(e){e.code==="Escape"&&(t.resetBackdrop.classList.add("visually-hidden"),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",n))}function P(e){if(e.preventDefault(),!t.taskInput.value){t.taskInput.classList.add("task-input-required"),i("Please, enter the task","#task");return}localStorage.setItem("task",t.taskInput.value),u()}function u(){if(!localStorage.getItem("task")){t.username.innerHTML=`Hi ${a()},`;return}t.taskWrap.insertAdjacentHTML("afterbegin",`<button type="button" class="edit-btn"><img class="edit-icon" src="${q}"/></button>`),t.taskForm.classList.add("task-form-hidden"),t.username.innerHTML=`Great ${a()}!`,t.taskFormDescription.innerHTML=`The task you'll be timing is "${E()}".`,document.querySelector(".edit-btn").addEventListener("click",J)}function J(){localStorage.removeItem("task"),document.querySelector(".edit-btn").remove(),t.taskForm.classList.remove("task-form-hidden"),t.username.innerHTML=`Hi ${a()},`,t.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.'}async function F(){t.sendBackdrop.classList.remove("visually-hidden");const e=await l();try{const s=await fetch("https://script.google.com/macros/s/AKfycbwQfPNpDsZK7s3qT5Jt8PBS7B2YnK_ILFqPV65fPhuc7J9jd8vJYz4g8oSnoR0GqPSE/exec",{method:"POST",body:JSON.stringify(e.items)})}catch(s){console.log(s)}finally{t.sendBackdrop.classList.add("visually-hidden")}}
//# sourceMappingURL=commonHelpers.js.map
