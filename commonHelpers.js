import{c as g,r as t,o as v,l as h,a as n,g as a,b as y}from"./assets/refs-bdc3d310.js";import{c as r,a as S,s as w,b,d as B,g as c,e as d,f as l,h as I,i as D,r as E,j as T}from"./assets/firebase-api-19f50676.js";import{n as q}from"./assets/vendor-451a0b16.js";g();u();r("default_stopwatch_1");S("default_stopwatch_1");const H=t.stepsList.getBoundingClientRect().top,N=window.innerHeight;setInterval(()=>{const e=JSON.parse(localStorage.getItem("log")).user;w("default_stopwatch_1",{lastTime:Date.now(),user:e,isBusy:!0})},5e3);r("default_stopwatch_1");t.backBtn.addEventListener("click",v);t.logOutBtn.addEventListener("click",h);t.startBtn.addEventListener("click",O);t.stopBtn.addEventListener("click",P);t.stepsList.addEventListener("click",M);t.sendBtn.addEventListener("click",j);t.resetBtn.addEventListener("click",J);t.resetBackdrop.addEventListener("click",F);document.addEventListener("scroll",_);t.taskInput.addEventListener("input",()=>{t.taskInput.classList.remove("task-input-required")});t.taskForm.addEventListener("submit",$);t.navName.innerHTML=JSON.parse(localStorage.getItem("log")).user;b();B();async function O(){if(!localStorage.getItem("task")){t.taskInput.classList.add("task-input-required"),n("Please, enter the task","#task");return}const e=Date.now(),s=await c();t.taskInput.classList.remove("task-input-required"),d({...s,isStart:!0,start:e})}async function P(){const e=Date.now(),s=await c(),i=await l(),k=i.items.length>0?i.items.length+1:1,m=e-s.start,p=localStorage.getItem("task"),f=JSON.parse(localStorage.getItem("log")).user,L={id:q(),step:k,time:m,user:f,task:p};I(L),d({...s,isStart:!1,stop:e})}function _(){const e=window.scrollY;t.listBtns&&e>=H-N?t.listBtns.classList.remove("button-hidden"):t.listBtns.classList.add("button-hidden")}async function M(e){e.target.nodeName==="BUTTON"&&D(e.target.id)}function J(){t.resetBackdrop.classList.remove("visually-hidden"),document.querySelector("body").style.overflow="hidden",document.addEventListener("keydown",o)}function F(e){e.target.classList.contains("no-btn")||e.target.classList.contains("backdrop")?t.resetBackdrop.classList.add("visually-hidden"):e.target.classList.contains("yes-btn")&&(E(),t.resetBackdrop.classList.add("visually-hidden")),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",o)}function o(e){e.code==="Escape"&&(t.resetBackdrop.classList.add("visually-hidden"),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",o))}function $(e){if(e.preventDefault(),!t.taskInput.value){t.taskInput.classList.add("task-input-required"),n("Please, enter the task","#task");return}localStorage.setItem("task",t.taskInput.value),u()}function u(){if(!localStorage.getItem("task")){t.username.innerHTML=`Hi ${a()},`;return}t.taskWrap.insertAdjacentHTML("afterbegin",`<button type="button" class="edit-btn"><img class="edit-icon" src="${T}"/></button>`),t.taskForm.classList.add("task-form-hidden"),t.username.innerHTML=`Great ${a()}!`,t.taskFormDescription.innerHTML=`The task you'll be timing is "${y()}".`,document.querySelector(".edit-btn").addEventListener("click",R)}function R(){localStorage.removeItem("task"),document.querySelector(".edit-btn").remove(),t.taskForm.classList.remove("task-form-hidden"),t.username.innerHTML=`Hi ${a()},`,t.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.'}async function j(){t.sendBackdrop.classList.remove("visually-hidden");const e=await l();e.type="default-stop-watch",t.listBtns.classList.add("button-hidden");try{const s=await fetch("https://script.google.com/macros/s/AKfycbwQfPNpDsZK7s3qT5Jt8PBS7B2YnK_ILFqPV65fPhuc7J9jd8vJYz4g8oSnoR0GqPSE/exec",{method:"POST",body:JSON.stringify(e)})}catch{n("Oops. Something went wrong.","#")}finally{t.listBtns.classList.remove("button-hidden"),t.sendBackdrop.classList.add("visually-hidden")}}
//# sourceMappingURL=commonHelpers.js.map
