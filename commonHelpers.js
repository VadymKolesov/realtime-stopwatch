import{c as L,r as t,o as g,l as v,a as n,g as a,b as h}from"./assets/refs-045b35db.js";import{s as y,c as S,a as w,b,g as r,d as c,e as d,f as B,h as I,r as D,i as E}from"./assets/firebase-api-d51a0bbf.js";import{n as T}from"./assets/vendor-451a0b16.js";L();l();const q=t.stepsList.getBoundingClientRect().top,H=window.innerHeight;setInterval(()=>{const e=JSON.parse(localStorage.getItem("log")).user;y("default_stopwatch_1",{lastTime:Date.now(),user:e,isBusy:!0})},5e3);S("default_stopwatch_1");t.backBtn.addEventListener("click",g);t.logOutBtn.addEventListener("click",v);t.startBtn.addEventListener("click",N);t.stopBtn.addEventListener("click",O);t.stepsList.addEventListener("click",M);t.sendBtn.addEventListener("click",R);t.resetBtn.addEventListener("click",J);t.resetBackdrop.addEventListener("click",F);document.addEventListener("scroll",P);t.taskInput.addEventListener("input",()=>{t.taskInput.classList.remove("task-input-required")});t.taskForm.addEventListener("submit",_);t.navName.innerHTML=JSON.parse(localStorage.getItem("log")).user;w();b();async function N(){if(!localStorage.getItem("task")){t.taskInput.classList.add("task-input-required"),n("Please, enter the task","#task");return}const e=Date.now(),s=await r();t.taskInput.classList.remove("task-input-required"),c({...s,isStart:!0,start:e})}async function O(){const e=Date.now(),s=await r(),i=await d(),u=i.items.length>0?i.items.length+1:1,k=e-s.start,m=localStorage.getItem("task"),p=JSON.parse(localStorage.getItem("log")).user,f={id:T(),step:u,time:k,user:p,task:m};B(f),c({...s,isStart:!1,stop:e})}function P(){const e=window.scrollY;t.listBtns&&e>=q-H?t.listBtns.classList.remove("button-hidden"):t.listBtns.classList.add("button-hidden")}async function M(e){e.target.nodeName==="BUTTON"&&I(e.target.id)}function J(){t.resetBackdrop.classList.remove("visually-hidden"),document.querySelector("body").style.overflow="hidden",document.addEventListener("keydown",o)}function F(e){e.target.classList.contains("no-btn")||e.target.classList.contains("backdrop")?t.resetBackdrop.classList.add("visually-hidden"):e.target.classList.contains("yes-btn")&&(D(),t.resetBackdrop.classList.add("visually-hidden")),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",o)}function o(e){e.code==="Escape"&&(t.resetBackdrop.classList.add("visually-hidden"),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",o))}function _(e){if(e.preventDefault(),!t.taskInput.value){t.taskInput.classList.add("task-input-required"),n("Please, enter the task","#task");return}localStorage.setItem("task",t.taskInput.value),l()}function l(){if(!localStorage.getItem("task")){t.username.innerHTML=`Hi ${a()},`;return}t.taskWrap.insertAdjacentHTML("afterbegin",`<button type="button" class="edit-btn"><img class="edit-icon" src="${E}"/></button>`),t.taskForm.classList.add("task-form-hidden"),t.username.innerHTML=`Great ${a()}!`,t.taskFormDescription.innerHTML=`The task you'll be timing is "${h()}".`,document.querySelector(".edit-btn").addEventListener("click",$)}function $(){localStorage.removeItem("task"),document.querySelector(".edit-btn").remove(),t.taskForm.classList.remove("task-form-hidden"),t.username.innerHTML=`Hi ${a()},`,t.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.'}async function R(){t.sendBackdrop.classList.remove("visually-hidden");const e=await d();e.type="default-stop-watch",t.listBtns.classList.add("button-hidden");try{const s=await fetch("https://script.google.com/macros/s/AKfycbwQfPNpDsZK7s3qT5Jt8PBS7B2YnK_ILFqPV65fPhuc7J9jd8vJYz4g8oSnoR0GqPSE/exec",{method:"POST",body:JSON.stringify(e)})}catch{n("Oops. Something went wrong.","#")}finally{t.listBtns.classList.remove("button-hidden"),t.sendBackdrop.classList.add("visually-hidden")}}
//# sourceMappingURL=commonHelpers.js.map
