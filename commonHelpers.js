import{c as L,a as r,b as g,g as v,s as y,r as t,o as h,l as S,d as b,e as I,f as i,h as c,i as l,j as D,k as w,m as B,n as E,p as a,q as T}from"./assets/firebase-api-f56168e4.js";import{n as q}from"./assets/vendor-451a0b16.js";const H="/realtime-stopwatch/assets/edit-0c3c4362.svg";L();d();r("default_stopwatch_1");g("default_stopwatch_1");setInterval(()=>{const e=v(),s=JSON.parse(localStorage.getItem("log")).user;if(e.user!==localUser){location.reload();return}y("default_stopwatch_1",{lastTime:Date.now(),user:s,isBusy:!0})},5e3);r("default_stopwatch_1");t.backBtn.addEventListener("click",h);t.logOutBtn.addEventListener("click",S);t.startBtn.addEventListener("click",M);t.stopBtn.addEventListener("click",N);t.stepsList.addEventListener("click",_);t.resetBtn.addEventListener("click",O);t.resetBackdrop.addEventListener("click",F);t.taskInput.addEventListener("input",()=>{t.taskInput.classList.remove("task-input-required")});t.taskForm.addEventListener("submit",$);t.navName.innerHTML=JSON.parse(localStorage.getItem("log")).user;b();I();async function M(){if(!localStorage.getItem("task")){t.taskInput.classList.add("task-input-required"),i("Please, enter the task","#task");return}const e=Date.now(),s=await c();t.taskInput.classList.remove("task-input-required"),l({...s,isStart:!0,start:e})}async function N(){const e=Date.now(),s=await c(),o=await D(),u=o.items.length>0?o.items.length+1:1,k=e-s.start,m=localStorage.getItem("task"),p=JSON.parse(localStorage.getItem("log")).user,f={id:q(),step:u,time:k,user:p,task:m};w(f),l({...s,isStart:!1,stop:e})}async function _(e){e.target.nodeName==="BUTTON"&&B(e.target.id)}function O(){t.resetBackdrop.classList.remove("visually-hidden"),document.querySelector("body").style.overflow="hidden",document.addEventListener("keydown",n)}function F(e){e.target.classList.contains("no-btn")||e.target.classList.contains("backdrop")?t.resetBackdrop.classList.add("visually-hidden"):e.target.classList.contains("yes-btn")&&(E(),t.resetBackdrop.classList.add("visually-hidden")),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",n)}function n(e){e.code==="Escape"&&(t.resetBackdrop.classList.add("visually-hidden"),document.querySelector("body").style.overflow="visible",document.removeEventListener("keydown",n))}function $(e){if(e.preventDefault(),!t.taskInput.value){t.taskInput.classList.add("task-input-required"),i("Please, enter the task","#task");return}localStorage.setItem("task",t.taskInput.value),d()}function d(){if(!localStorage.getItem("task")){t.username.innerHTML=`Hi ${a()},`;return}t.taskWrap.insertAdjacentHTML("afterbegin",`<button type="button" class="edit-btn"><img class="edit-icon" src="${H}"/></button>`),t.taskForm.classList.add("task-form-hidden"),t.username.innerHTML=`Great ${a()}!`,t.taskFormDescription.innerHTML=`The task you'll be timing is "${T()}".`,document.querySelector(".edit-btn").addEventListener("click",J)}function J(){localStorage.removeItem("task"),document.querySelector(".edit-btn").remove(),t.taskForm.classList.remove("task-form-hidden"),t.username.innerHTML=`Hi ${a()},`,t.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.'}
//# sourceMappingURL=commonHelpers.js.map
