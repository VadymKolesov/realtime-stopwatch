{"version":3,"file":"firebase-api-5cf9a945.js","sources":["../../src/js/firebase-config.js","../../src/js/database.js","../../src/js/manage-btns.js","../../src/js/watch.js","../../src/js/render-steps-list.js","../../src/js/firebase-api.js"],"sourcesContent":["const firebaseConfig = {\n  apiKey: \"AIzaSyCuVjEugcofQtVmUyg1Bm1vmoIkKJ7-dfU\",\n  authDomain: \"timer-b359e.firebaseapp.com\",\n  databaseURL:\n    \"https://timer-b359e-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"timer-b359e\",\n  storageBucket: \"timer-b359e.appspot.com\",\n  messagingSenderId: \"544796112036\",\n  appId: \"1:544796112036:web:dea584d81b16885d642231\",\n};\n\nexport default firebaseConfig;\n","import { initializeApp } from \"firebase/app\";\nimport firebaseConfig from \"./firebase-config\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\n","import * as Utilites from \"./utilites\";\nimport { refs } from \"./refs\";\n\nexport async function manageBtns(data) {\n  if (data.isReady === 0) {\n    localStorage.setItem(\"readyID\", 3);\n  }\n\n  const readyID = JSON.parse(localStorage.getItem(\"readyID\"));\n\n  if (data.isReady < 2 && !data.isStart && readyID !== data.isReady) {\n    Utilites.enableBtn(refs.readyBtn);\n    Utilites.disableBtn(refs.stopBtn);\n    refs.readyContent.textContent = `I'm ready`;\n  } else if (data.isReady === 2 && !data.isStart) {\n    Utilites.enableBtn(refs.startBtn);\n    refs.readyContent.textContent = `All users ready`;\n    refs.loader.classList.add(\"hide-loader\");\n  } else if (data.isStart) {\n    Utilites.enableBtn(refs.stopBtn);\n    Utilites.disableBtn(refs.startBtn);\n    refs.readyContent.textContent = `Timer is active`;\n  } else if (!data.isStart && readyID === data.isReady) {\n    refs.readyContent.textContent = `Waiting for users`;\n    refs.loader.classList.remove(\"hide-loader\");\n  }\n}\n\nexport async function manageBtnsDefault(data) {\n  if (data.isStart) {\n    Utilites.enableBtn(refs.stopBtn);\n    Utilites.disableBtn(refs.startBtn);\n    return;\n  }\n\n  Utilites.enableBtn(refs.startBtn);\n  Utilites.disableBtn(refs.stopBtn);\n}\n","import { convertMs } from \"./utilites\";\nimport { refs } from \"./refs\";\n\nlet watchInterval;\n\nexport const manageWatchInterval = (data) => {\n  if (data.isStart) {\n    watchInterval = setInterval(() => {\n      const now = Date.now();\n      const result = now - data.start;\n      renderWatch(result);\n    }, 10);\n  } else if (!data.isStart) {\n    clearInterval(watchInterval);\n  }\n};\n\nexport function renderWatch(time) {\n  const { minutes, secunds, milisecunds } = convertMs(time);\n  refs.watch.innerHTML = `${minutes}:${secunds},${milisecunds}`;\n}\n","import { refs } from \"./refs\";\nimport { convertMs } from \"./utilites\";\n\nexport const renderStepsList = (data) => {\n  if (data.length > 0) {\n    refs.listBtns.classList.add(\"btns-list-visible\");\n  } else {\n    refs.listBtns.classList.remove(\"btns-list-visible\");\n  }\n\n  const render = data\n    .map(\n      (el) => `\n    <li class=\"step-item\">\n      <div>\n        <p class=\"step\">Step ${el.step}</p>\n        \n        <p class=\"time\">${convertMs(el.time).minutes}:${\n        convertMs(el.time).secunds\n      },${convertMs(el.time).milisecunds}</p>\n      </div>\n      <button id=\"${el.id}\" type=\"button\" class=\"delete-btn\">Delete</button>\n    </li>\n  `\n    )\n    .join(\"\");\n\n  refs.stepsList.innerHTML = render;\n};\n","import { initializeApp } from 'firebase/app';\nimport { getDatabase, ref, child, get, set } from 'firebase/database';\nimport {\n  doc,\n  onSnapshot,\n  getFirestore,\n  setDoc,\n  getDoc,\n  getDocs,\n  collection,\n} from 'firebase/firestore';\nimport firebaseConfig from './firebase-config';\nimport { db } from './database';\nimport { manageBtns, manageBtnsDefault } from './manage-btns';\nimport { manageWatchInterval } from './watch';\nimport { showUsers } from './manage-users';\nimport { renderStepsList } from './render-steps-list';\n\nexport async function getFirebaseData() {\n  const dbRef = ref(getDatabase());\n  const data = await get(child(dbRef, `timer/`))\n    .then(snapshot => {\n      if (snapshot.exists()) {\n        return snapshot.val();\n      } else {\n        console.log('No data available');\n      }\n    })\n    .catch(error => {\n      console.error(error);\n    });\n  return data;\n}\n\nexport function writeData(data) {\n  const db = getDatabase();\n  set(ref(db, 'timer/'), data);\n}\n\nexport async function checkList() {\n  const app = initializeApp(firebaseConfig);\n  const db = getFirestore(app);\n  onSnapshot(doc(db, 'list', 'Oi4nFSVsaGY2GQtak5IO'), doc => {\n    const data = doc.data().items.reverse();\n  });\n}\n\nexport function checkData() {\n  const app = initializeApp(firebaseConfig);\n  const db = getFirestore(app);\n  onSnapshot(doc(db, 'data', 'GKpJfJAhEovC4aEqzc9C'), doc => {\n    const data = doc.data();\n    manageBtns(data);\n    showUsers(data);\n    manageWatchInterval(data);\n  });\n}\n\nexport async function getData() {\n  const docRef = doc(db, 'data', 'GKpJfJAhEovC4aEqzc9C');\n  const data = await getDoc(docRef);\n  return data.data();\n}\n\nexport async function setData(data) {\n  const docRef = await setDoc(doc(db, 'data', 'GKpJfJAhEovC4aEqzc9C'), {\n    ...data,\n  });\n}\n\nexport async function getStepsList() {\n  const docRef = doc(db, 'list', 'Oi4nFSVsaGY2GQtak5IO');\n  const data = await getDoc(docRef);\n  return data.data();\n}\n\nexport async function addStepToList(data) {\n  const prevList = await getStepsList();\n  setDoc(doc(db, 'list', 'Oi4nFSVsaGY2GQtak5IO'), {\n    items: [...prevList.items, data],\n  });\n}\n\nexport function checkDefaultData() {\n  const app = initializeApp(firebaseConfig);\n  const db = getFirestore(app);\n  onSnapshot(doc(db, 'data', 'Default'), doc => {\n    const data = doc.data();\n    manageBtnsDefault(data);\n    manageWatchInterval(data);\n  });\n}\n\nexport async function checkDefaultList() {\n  const app = initializeApp(firebaseConfig);\n  const db = getFirestore(app);\n  onSnapshot(doc(db, 'list', 'Default'), doc => {\n    const data = doc.data().items.reverse();\n    renderStepsList(data);\n  });\n}\n\nexport async function getDefaultData() {\n  const docRef = doc(db, 'data', 'Default');\n  const data = await getDoc(docRef);\n  return data.data();\n}\n\nexport async function setDefaultData(data) {\n  const docRef = await setDoc(doc(db, 'data', 'Default'), {\n    ...data,\n  });\n}\n\nexport async function getDefaultStepsList() {\n  const docRef = doc(db, 'list', 'Default');\n  const data = await getDoc(docRef);\n  return data.data();\n}\n\nexport async function addDefaultStepToList(data) {\n  const prevList = await getDefaultStepsList();\n  setDoc(doc(db, 'list', 'Default'), {\n    items: [...prevList.items, data],\n  });\n}\n\nexport async function deleteDefaultStepById(id) {\n  const prevList = await getDefaultStepsList();\n  const newList = prevList.items.filter(el => el.id !== id);\n\n  for (let i = 0; i < newList.length; i++) {\n    if (i === 0) {\n      newList.step === 1;\n    }\n\n    newList[i].step = i + 1;\n  }\n\n  setDoc(doc(db, 'list', 'Default'), {\n    items: newList,\n  });\n}\n\nexport async function resetDefaultStepList(data) {\n  const prevList = await getDefaultStepsList();\n  setDoc(doc(db, 'list', 'Default'), {\n    items: [],\n  });\n}\n\nexport async function getUsers() {\n  const docRef = doc(db, 'users', 'tokens');\n  const data = await getDoc(docRef);\n  return data.data().data;\n}\n"],"names":["firebaseConfig","app","initializeApp","db","getFirestore","manageBtnsDefault","data","Utilites.enableBtn","refs","Utilites.disableBtn","watchInterval","manageWatchInterval","result","renderWatch","time","minutes","secunds","milisecunds","convertMs","renderStepsList","render","el","checkDefaultData","onSnapshot","doc","checkDefaultList","getDefaultData","docRef","getDoc","setDefaultData","setDoc","getDefaultStepsList","addDefaultStepToList","prevList","deleteDefaultStepById","id","newList","i","resetDefaultStepList","getUsers"],"mappings":"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"}