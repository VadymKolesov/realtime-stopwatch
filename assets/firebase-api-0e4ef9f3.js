import{i as u,g as m,T as E,o as g,d as o,s as l,a as d}from"./vendor-451a0b16.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const y of i.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&n(y)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const p={apiKey:"AIzaSyCuVjEugcofQtVmUyg1Bm1vmoIkKJ7-dfU",authDomain:"timer-b359e.firebaseapp.com",databaseURL:"https://timer-b359e-default-rtdb.europe-west1.firebasedatabase.app",projectId:"timer-b359e",storageBucket:"timer-b359e.appspot.com",messagingSenderId:"544796112036",appId:"1:544796112036:web:dea584d81b16885d642231"},T=u(p),c=m(T),O="/realtime-stopwatch/assets/warning-9b7d5026.svg",S=t=>{const i=Math.floor(t%864e5%36e5/6e4).toString().padStart(2,"0"),y=Math.floor(t%864e5%36e5%6e4/1e3).toString().padStart(2,"0"),D=t.toString().slice(-3);return{minutes:i,secunds:y,milisecunds:D}},f=t=>{t.disabled=!1,t.classList.remove("inactive-btn"),t.classList.add("active-btn")},b=t=>{t.disabled=!0,t.classList.add("inactive-btn"),t.classList.remove("active-btn")};function W(){if(!localStorage.getItem("log")||Date.now()-JSON.parse(localStorage.getItem("log")).logIn>864e5){localStorage.removeItem("log");const t=location.pathname.split("/");location.pathname=`/${t[1]}/login.html`}}function z(){const t=location.pathname.split("/");location.pathname=`/${t[1]}`}function P(){location.reload()}function Q(){localStorage.removeItem("log");const t=location.pathname.split("/");location.pathname=`/${t[1]}/login.html`}function B(){return JSON.parse(localStorage.getItem("log")).user.split(" ")[0]}function Y(){return localStorage.getItem("task")}function X(){return JSON.parse(localStorage.getItem("process"))}function C(t,e){const s=document.createElement("p");s.insertAdjacentHTML("afterbegin",`<a href="${e}"><div class="alert-error"><img src="${O}"/><p>${t}</p></div></a>`),E({duration:2e3,node:s,className:"info",gravity:"bottom",position:"center",stopOnFocus:!1,style:{borderRadius:"15px",boxShadow:"rgba(0, 0, 0, 0.2) 0px 5px 15px",background:"linear-gradient(170deg,rgba(255, 255, 255, 1) 0%,rgba(245, 245, 245, 1) 100%)"}}).showToast()}async function $(t,e){document.getElementById(t)&&(document.getElementById(t).classList.remove("isNotBusy"),document.getElementById(t).classList.add("isBusy"),document.getElementById(t).parentElement.parentElement.firstElementChild.insertAdjacentHTML("beforeend",`<p class="user-busy-link">${e}</p>`),document.getElementById(t).parentElement.parentElement.style.pointerEvents="none",document.getElementById(t).parentElement.parentElement.parentElement.classList.add("is-room-busy"))}function Z(t){t.target.classList.contains("is-room-busy")&&C("The room is busy, please try again later.","#")}function R(t){document.getElementById(t)&&(document.getElementById(t).classList.add("isNotBusy"),document.getElementById(t).classList.remove("isBusy"),document.getElementById(t).parentElement.parentElement.style.pointerEvents="all")}let v;function _(t,e){clearTimeout(v),v=setTimeout(t,e)}const a={readyBtn:document.querySelector(".ready-content"),startBtn:document.querySelector(".start-btn"),lapBtn:document.querySelector(".lap-btn"),stopBtn:document.querySelector(".stop-btn"),watch:document.querySelector(".timer-clock"),readyContent:document.querySelector(".ready-btn"),loader:document.querySelector(".loader-wrap"),readyUsers:document.querySelector(".ready-users"),stepsList:document.querySelector(".steps-list"),stepItems:document.querySelectorAll(".step-item"),listBtns:document.querySelector(".list-btns"),resetBtn:document.querySelector(".reset-btn"),sendBtn:document.querySelector(".send-btn"),resetBackdrop:document.querySelector(".reset-backdrop"),resetModal:document.querySelector(".reset-modal"),sendBackdrop:document.querySelector(".post-backdrop"),noBtn:document.querySelector(".no-btn"),yesBtn:document.querySelector(".yes-btn"),taskInput:document.querySelector(".task-input"),loginForm:document.querySelector(".login-form"),loginInput:document.querySelector(".login-input"),loginBtn:document.querySelector(".login-btn"),backBtn:document.querySelector(".back-btn"),reloadBtn:document.querySelector(".reload-btn"),logOutBtn:document.querySelector(".log-out-btn"),username:document.querySelector(".username"),taskWrap:document.querySelector(".task-wrap"),editWrap:document.querySelector(".edit-wrap"),taskForm:document.querySelector(".task-form"),taskFormDescription:document.querySelector(".task-description"),navName:document.querySelector(".nav-name"),roomsList:document.querySelector(".rooms-list"),roomItem:document.querySelector(".room-item"),processInput:document.querySelector(".process-input"),processList:document.querySelector(".process-list"),processItems:document.querySelectorAll(".process-item"),showListBtn:document.querySelector(".show-list-btn"),hideListBtn:document.querySelector(".hide-list-btn"),listBackdrop:document.querySelector(".list-backdrop"),totalList:document.querySelector(".total-list"),sendBtnWrap:document.querySelector(".send-btn-wrap"),sendTotalBtn:document.querySelector(".send-total-btn"),deleteTotalBtn:document.querySelectorAll(".total-list-item-delete"),sectionList:document.querySelector(".section-list"),processesSaveBtn:document.querySelector(".save-processes-btn")},M="/realtime-stopwatch/assets/edit-0c3c4362.svg";async function F(t){t.isReady===0&&localStorage.setItem("readyID",3);const e=JSON.parse(localStorage.getItem("readyID"));t.isReady<2&&!t.isStart&&e!==t.isReady?(f(a.readyBtn),b(a.stopBtn),a.readyContent.textContent="I'm ready"):t.isReady===2&&!t.isStart?(f(a.startBtn),a.readyContent.textContent="All users ready",a.loader.classList.add("hide-loader")):t.isStart?(f(a.stopBtn),b(a.startBtn),a.readyContent.textContent="Timer is active"):!t.isStart&&e===t.isReady&&(a.readyContent.textContent="Waiting for users",a.loader.classList.remove("hide-loader"))}async function A(t){if(t.isStart){f(a.stopBtn),b(a.startBtn);return}f(a.startBtn),b(a.stopBtn)}function G(t){console.log(t),a.editWrap.innerHTML=`<button type="button" class="edit-btn"><img class="edit-icon" src="${M}"/></button>`,document.querySelector(".edit-btn").disabled=!0,document.querySelector(".edit-btn").style.visibility="hidden",a.taskForm.classList.remove("task-form-hidden"),a.username.innerHTML=`Hi ${B()},`,a.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.',t&&t!==""&&(document.querySelector(".edit-btn").disabled=!1,document.querySelector(".edit-btn").style.visibility="visible",a.taskForm.classList.add("task-form-hidden"),a.username.innerHTML=`Great ${B()}!`,a.taskFormDescription.innerHTML=`The process you'll be timing is "${t}".`,document.querySelector(".edit-btn").addEventListener("click",J))}function J(){U("")}let I;const q=t=>{t.isStart?I=setInterval(()=>{const s=Date.now()-t.start;N(s)},10):t.isStart||clearInterval(I)};function N(t){const{minutes:e,secunds:s,milisecunds:n}=S(t);a.watch.innerHTML=`${e}:${s},${n}`}const x="/realtime-stopwatch/assets/check-682f1643.svg";function H(t){const e=JSON.parse(localStorage.getItem("readyID")),s=document.querySelectorAll(".user");if(t.isStart||t.isReady===2){a.readyUsers.innerHTML="";return}else t.isReady===1&&s.length<=1&&e!==t.isReady&&(a.readyUsers.insertAdjacentHTML("afterbegin",`<li class="user"><img src="${x}" class="check-icon" /><p class="ready-message">First user is ready.</p></li>`),a.readyUsers.firstElementChild.classList.add("user-visible"))}const k=t=>{t.length>0?a.listBtns.classList.add("btns-list-visible"):a.listBtns.classList.remove("btns-list-visible");const e=t.map(s=>`
    <li class="step-item">
    <div>
    <div class="step-time-item">
        <div>
          <p class="step">Step ${s.step}</p>
          <p class="time">${S(s.time).minutes}:${S(s.time).secunds},${S(s.time).milisecunds}</p>
        </div>
    </div>
    <div class="step-description">
      <p class="step-user">${s.user}</p>
      <p class="step-task">Task: ${s.task}</p>
    </div>
    </div>
    <button id="${s.id}" type="button" class="delete-btn">Delete</button>
    </li>
  `).join("");a.stepsList.innerHTML=e};async function tt(){const t=u(p),e=m(t);g(o(e,"list","Oi4nFSVsaGY2GQtak5IO"),s=>{const n=s.data().items.reverse();k(n)})}async function et(){const t=u(p),e=m(t);g(o(e,"realtimeLines","current"),s=>{const n=s.data().currentLine;G(n)})}function st(){const t=u(p),e=m(t);g(o(e,"data","GKpJfJAhEovC4aEqzc9C"),s=>{const n=s.data();F(n),H(n),q(n)})}async function nt(){const t=o(c,"data","GKpJfJAhEovC4aEqzc9C");return(await d(t)).data()}async function at(){const t=o(c,"realtimeLines","current");return(await d(t)).data().currentLine}async function ot(t){await l(o(c,"data","GKpJfJAhEovC4aEqzc9C"),{...t})}async function U(t){await l(o(c,"realtimeLines","current"),{currentLine:t})}async function h(){const t=o(c,"list","Oi4nFSVsaGY2GQtak5IO");return(await d(t)).data()}async function rt(t){const e=await h();l(o(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:[...e.items,t]})}async function ct(){await h(),l(o(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:[]})}async function it(t){const s=(await h()).items.filter(n=>n.id!==t);for(let n=0;n<s.length;n++)n===0&&s.step,s[n].step=n+1;l(o(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:s})}function lt(){const t=u(p),e=m(t);g(o(e,"data","Default"),s=>{const n=s.data();A(n),q(n)})}async function dt(){const t=u(p),e=m(t);g(o(e,"list","Default"),s=>{const n=s.data().items.reverse();k(n)})}async function ut(){const t=o(c,"data","Default");return(await d(t)).data()}async function mt(t){await l(o(c,"data","Default"),{...t})}async function L(){const t=o(c,"list","Default");return(await d(t)).data()}async function pt(t){const e=await L();l(o(c,"list","Default"),{items:[...e.items,t]})}async function yt(t){const s=(await L()).items.filter(n=>n.id!==t);for(let n=0;n<s.length;n++)n===0&&s.step,s[n].step=n+1;l(o(c,"list","Default"),{items:s})}async function ft(t){await L(),l(o(c,"list","Default"),{items:[]})}async function gt(){const t=o(c,"users","tokens");return(await d(t)).data().data}async function j(t,e){await l(o(c,"online",t),{item:e})}async function w(t){const e=o(c,"online",t);return(await d(e)).data().item}async function St(t){const e=await w(t);if(Date.now()-e.lastTime<3e4){$(t,e.user);return}else{const n={...e,user:"",isBusy:!1};j(t,n),R(t)}}async function bt(t){const e=await w(t),s=JSON.parse(localStorage.getItem("log")).user,n=e.user;if(e.isBusy&&s!==n){const r=location.pathname.split("/");location.pathname=`/${r[1]}`}}async function ht(){const t=o(c,"processes","processes-m13");return(await d(t)).data().items}export{b as A,N as B,X as C,nt as D,ot as E,h as F,at as G,rt as H,ct as I,st as J,tt as K,et as L,U as M,it as N,St as a,bt as b,W as c,lt as d,dt as e,C as f,ut as g,mt as h,L as i,pt as j,yt as k,Q as l,ft as m,B as n,z as o,M as p,Y as q,a as r,j as s,P as t,Z as u,gt as v,S as w,_ as x,ht as y,f as z};
//# sourceMappingURL=firebase-api-0e4ef9f3.js.map
