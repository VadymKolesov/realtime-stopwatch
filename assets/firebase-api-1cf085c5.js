import{i as l,g as u,o as f,d as i,s as o,a as r}from"./vendor-451a0b16.js";import{i as d,r as n,j as y,g as b,f as m,s as k,m as I,n as p,p as c}from"./refs-045b35db.js";const B="/realtime-stopwatch/assets/edit-0c3c4362.svg";async function C(t){t.isReady===0&&localStorage.setItem("readyID",3);const e=JSON.parse(localStorage.getItem("readyID"));t.isReady<2&&!t.isStart&&e!==t.isReady?(d(n.readyBtn),y(n.stopBtn),n.readyContent.textContent="I'm ready"):t.isReady===2&&!t.isStart?(d(n.startBtn),n.readyContent.textContent="All users ready",n.loader.classList.add("hide-loader")):t.isStart?(d(n.stopBtn),y(n.startBtn),n.readyContent.textContent="Timer is active"):!t.isStart&&e===t.isReady&&(n.readyContent.textContent="Waiting for users",n.loader.classList.remove("hide-loader"))}async function R(t){if(t.isStart){d(n.stopBtn),y(n.startBtn);return}d(n.startBtn),y(n.stopBtn)}function $(t){console.log(t),n.editWrap.innerHTML=`<button type="button" class="edit-btn"><img class="edit-icon" src="${B}"/></button>`,document.querySelector(".edit-btn").disabled=!0,document.querySelector(".edit-btn").style.visibility="hidden",n.taskForm.classList.remove("task-form-hidden"),n.username.innerHTML=`Hi ${b()},`,n.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.',t&&t!==""&&(document.querySelector(".edit-btn").disabled=!1,document.querySelector(".edit-btn").style.visibility="visible",n.taskForm.classList.add("task-form-hidden"),n.username.innerHTML=`Great ${b()}!`,n.taskFormDescription.innerHTML=`The process you'll be timing is "${t}".`,document.querySelector(".edit-btn").addEventListener("click",T))}function T(){M("")}let h;const v=t=>{t.isStart?h=setInterval(()=>{const s=Date.now()-t.start;G(s)},10):t.isStart||clearInterval(h)};function G(t){const{minutes:e,secunds:s,milisecunds:a}=m(t);n.watch.innerHTML=`${e}:${s},${a}`}const O="/realtime-stopwatch/assets/check-682f1643.svg";function F(t){const e=JSON.parse(localStorage.getItem("readyID")),s=document.querySelectorAll(".user");if(t.isStart||t.isReady===2){n.readyUsers.innerHTML="";return}else t.isReady===1&&s.length<=1&&e!==t.isReady&&(n.readyUsers.insertAdjacentHTML("afterbegin",`<li class="user"><img src="${O}" class="check-icon" /><p class="ready-message">First user is ready.</p></li>`),n.readyUsers.firstElementChild.classList.add("user-visible"))}const S=t=>{t.length>0?n.listBtns.classList.add("btns-list-visible"):n.listBtns.classList.remove("btns-list-visible");const e=t.map(s=>`
    <li class="step-item">
    <div>
    <div class="step-time-item">
        <div>
          <p class="step">Step ${s.step}</p>
          <p class="time">${m(s.time).minutes}:${m(s.time).secunds},${m(s.time).milisecunds}</p>
        </div>
    </div>
    <div class="step-description">
      <p class="step-user">${s.user}</p>
      <p class="step-task">Task: ${s.task}</p>
    </div>
    </div>
    <button id="${s.id}" type="button" class="delete-btn">Delete</button>
    </li>
  `).join("");n.stepsList.innerHTML=e};async function J(){const t=l(p),e=u(t);f(i(e,"list","Oi4nFSVsaGY2GQtak5IO"),s=>{const a=s.data().items.reverse();S(a)})}async function U(){const t=l(p),e=u(t);f(i(e,"realtimeLines","current"),s=>{const a=s.data().currentLine;$(a)})}function x(){const t=l(p),e=u(t);f(i(e,"data","GKpJfJAhEovC4aEqzc9C"),s=>{const a=s.data();C(a),F(a),v(a)})}async function A(){const t=i(c,"data","GKpJfJAhEovC4aEqzc9C");return(await r(t)).data()}async function j(){const t=i(c,"realtimeLines","current");return(await r(t)).data().currentLine}async function z(t){await o(i(c,"data","GKpJfJAhEovC4aEqzc9C"),{...t})}async function M(t){await o(i(c,"realtimeLines","current"),{currentLine:t})}async function L(){const t=i(c,"list","Oi4nFSVsaGY2GQtak5IO");return(await r(t)).data()}async function Q(t){const e=await L();o(i(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:[...e.items,t]})}async function V(){await L(),o(i(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:[]})}async function Y(t){const s=(await L()).items.filter(a=>a.id!==t);for(let a=0;a<s.length;a++)a===0&&s.step,s[a].step=a+1;o(i(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:s})}function W(){const t=l(p),e=u(t);f(i(e,"data","Default"),s=>{const a=s.data();R(a),v(a)})}async function K(){const t=l(p),e=u(t);f(i(e,"list","Default"),s=>{const a=s.data().items.reverse();S(a)})}async function N(){const t=i(c,"data","Default");return(await r(t)).data()}async function P(t){await o(i(c,"data","Default"),{...t})}async function g(){const t=i(c,"list","Default");return(await r(t)).data()}async function X(t){const e=await g();o(i(c,"list","Default"),{items:[...e.items,t]})}async function Z(t){const s=(await g()).items.filter(a=>a.id!==t);for(let a=0;a<s.length;a++)a===0&&s.step,s[a].step=a+1;o(i(c,"list","Default"),{items:s})}async function _(t){await g(),o(i(c,"list","Default"),{items:[]})}async function tt(){const t=i(c,"users","tokens");return(await r(t)).data().data}async function q(t,e){await o(i(c,"online",t),{item:e})}async function w(t){const e=i(c,"online",t);return(await r(e)).data().item}async function et(t){const e=await w(t);if(Date.now()-e.lastTime<3e4){k(t,e.user);return}else{const a={...e,user:"",isBusy:!1};q(t,a),I(t)}}async function st(t){const e=await w(t),s=JSON.parse(localStorage.getItem("log")).user,a=e.user;if(e.isBusy&&s!==a){const D=location.pathname.split("/");location.pathname=`/${D[1]}`}}async function at(){const t=i(c,"processes","processes-m13");return(await r(t)).data().items}export{st as a,W as b,et as c,K as d,P as e,g as f,N as g,X as h,Z as i,B as j,tt as k,at as l,G as m,A as n,z as o,L as p,j as q,_ as r,q as s,Q as t,V as u,x as v,J as w,U as x,M as y,Y as z};
//# sourceMappingURL=firebase-api-1cf085c5.js.map
