import{i as l,g as u,o as f,d as i,s as o,a as r}from"./vendor-451a0b16.js";import{i as d,r as n,j as m,g as v,f as y,s as D,m as w,n as p,p as c}from"./refs-045b35db.js";const k="/realtime-stopwatch/assets/edit-0c3c4362.svg";async function I(t){t.isReady===0&&localStorage.setItem("readyID",3);const e=JSON.parse(localStorage.getItem("readyID"));t.isReady<2&&!t.isStart&&e!==t.isReady?(d(n.readyBtn),m(n.stopBtn),n.readyContent.textContent="I'm ready"):t.isReady===2&&!t.isStart?(d(n.startBtn),n.readyContent.textContent="All users ready",n.loader.classList.add("hide-loader")):t.isStart?(d(n.stopBtn),m(n.startBtn),n.readyContent.textContent="Timer is active"):!t.isStart&&e===t.isReady&&(n.readyContent.textContent="Waiting for users",n.loader.classList.remove("hide-loader"))}async function B(t){if(t.isStart){d(n.stopBtn),m(n.startBtn);return}d(n.startBtn),m(n.stopBtn)}function C(t){console.log(t),n.editWrap.innerHTML=`<button type="button" class="edit-btn"><img class="edit-icon" src="${k}"/></button>`,document.querySelector(".edit-btn").disabled=!0,document.querySelector(".edit-btn").style.visibility="hidden",n.taskForm.classList.remove("task-form-hidden"),n.username.innerHTML=`Hi ${v()},`,n.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.',t&&t!==""&&(document.querySelector(".edit-btn").disabled=!1,document.querySelector(".edit-btn").style.visibility="visible",n.taskForm.classList.add("task-form-hidden"),n.username.innerHTML=`Great ${v()}!`,n.taskFormDescription.innerHTML=`The process you'll be timing is "${t}".`,document.querySelector(".edit-btn").addEventListener("click",R))}function R(){O("")}let g;const h=t=>{t.isStart?g=setInterval(()=>{const s=Date.now()-t.start;T(s)},10):t.isStart||clearInterval(g)};function T(t){const{minutes:e,secunds:s,milisecunds:a}=y(t);n.watch.innerHTML=`${e}:${s},${a}`}const $="/realtime-stopwatch/assets/check-682f1643.svg";function G(t){const e=JSON.parse(localStorage.getItem("readyID")),s=document.querySelectorAll(".user");if(t.isStart||t.isReady===2){n.readyUsers.innerHTML="";return}else t.isReady===1&&s.length<=1&&e!==t.isReady&&(n.readyUsers.insertAdjacentHTML("afterbegin",`<li class="user"><img src="${$}" class="check-icon" /><p class="ready-message">First user is ready.</p></li>`),n.readyUsers.firstElementChild.classList.add("user-visible"))}const S=t=>{t.length>0?n.listBtns.classList.add("btns-list-visible"):n.listBtns.classList.remove("btns-list-visible");const e=t.map(s=>`
    <li class="step-item">
    <div>
    <div class="step-time-item">
        <div>
          <p class="step">Step ${s.step}</p>
          <p class="time">${y(s.time).minutes}:${y(s.time).secunds},${y(s.time).milisecunds}</p>
        </div>
    </div>
    <div class="step-description">
      <p class="step-user">${s.user}</p>
      <p class="step-task">Task: ${s.task}</p>
    </div>
    </div>
    <button id="${s.id}" type="button" class="delete-btn">Delete</button>
    </li>
  `).join("");n.stepsList.innerHTML=e};async function E(){const t=l(p),e=u(t);f(i(e,"list","Oi4nFSVsaGY2GQtak5IO"),s=>{const a=s.data().items.reverse();S(a)})}async function J(){const t=l(p),e=u(t);f(i(e,"realtimeLines","current"),s=>{const a=s.data().currentLine;C(a)})}function x(){const t=l(p),e=u(t);f(i(e,"data","GKpJfJAhEovC4aEqzc9C"),s=>{const a=s.data();I(a),G(a),h(a)})}async function A(){const t=i(c,"data","GKpJfJAhEovC4aEqzc9C");return(await r(t)).data()}async function j(){const t=i(c,"realtimeLines","current");return(await r(t)).data().currentLine}async function Q(t){await o(i(c,"data","GKpJfJAhEovC4aEqzc9C"),{...t})}async function O(t){await o(i(c,"realtimeLines","current"),{currentLine:t})}async function L(){const t=i(c,"list","Oi4nFSVsaGY2GQtak5IO");return(await r(t)).data()}async function U(t){const e=await L();o(i(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:[...e.items,t]})}async function V(){await L(),o(i(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:[]})}async function Y(t){const s=(await L()).items.filter(a=>a.id!==t);for(let a=0;a<s.length;a++)a===0&&s.step,s[a].step=a+1;o(i(c,"list","Oi4nFSVsaGY2GQtak5IO"),{items:s})}function z(){const t=l(p),e=u(t);f(i(e,"data","Default"),s=>{const a=s.data();B(a),h(a)})}async function W(){const t=l(p),e=u(t);f(i(e,"list","Default"),s=>{const a=s.data().items.reverse();S(a)})}async function K(){const t=i(c,"data","Default");return(await r(t)).data()}async function N(t){await o(i(c,"data","Default"),{...t})}async function b(){const t=i(c,"list","Default");return(await r(t)).data()}async function P(t){const e=await b();o(i(c,"list","Default"),{items:[...e.items,t]})}async function X(t){const s=(await b()).items.filter(a=>a.id!==t);for(let a=0;a<s.length;a++)a===0&&s.step,s[a].step=a+1;o(i(c,"list","Default"),{items:s})}async function Z(t){await b(),o(i(c,"list","Default"),{items:[]})}async function _(){const t=i(c,"users","tokens");return(await r(t)).data().data}async function F(t,e){await o(i(c,"online",t),{item:e})}async function M(t){const e=i(c,"online",t);return(await r(e)).data().item}async function tt(t){const e=await M(t);if(Date.now()-e.lastTime<3e4){D(t,e.user);return}else{const a={...e,user:"",isBusy:!1};F(t,a),w(t)}}async function et(){const t=i(c,"processes","processes-m13");return(await r(t)).data().items}export{z as a,W as b,tt as c,N as d,b as e,P as f,K as g,X as h,k as i,_ as j,et as k,T as l,A as m,Q as n,L as o,j as p,U as q,Z as r,F as s,V as t,x as u,E as v,J as w,O as x,Y as y};
//# sourceMappingURL=firebase-api-d51a0bbf.js.map
