import{w as l,r as e,c as h,o as b,x as I,y as p,f as m,z as d,A as r,n as u,p as k,B as S,C as B}from"./assets/firebase-api-382ecb1f.js";import{n as v}from"./assets/vendor-451a0b16.js";function g(t){return t.map(s=>`<li class="process-item">
                <p class="process-item-name">
                  ${s.name}
                </p>
              </li>`).join("")}const w=t=>{const s=t.map(o=>`
    <li class="process-list-item">
    <div>
    <div class="step-time-item">
        <div>
          <p class="step">Step ${o.step}</p>
          <p class="time">${l(o.time).minutes}:${l(o.time).secunds},${l(o.time).milisecunds}</p>
        </div>
    </div>
    <div class="step-description">
      <div class="step-task">
        <p>${o.task}</p>
      </div>
    </div>
    </div>
    </li>
  `).join("");e.stepsList.innerHTML=s};function T(t){return t.map(s=>`
    <li class="total-list-item">
          <p class="total-list-title">${s.process}</p>
          <ul class="total-list-tasks">
            ${s.items.map(o=>`
                <li class="total-list-tasks-item">
              <div class="total-task">
                <p class="total-list-tasks-step">${o.step}.</p>
                <p class="total-list-tasks-task">${o.task}</p>
              </div>
              <p class="total-list-tasks-time">
                ${l(o.time).minutes}:${l(o.time).secunds},${l(o.time).milisecunds}
              </p>
            </li>
            `).join("")}
          </ul>
          <button id="${s.id}" type="button" class="total-list-item-delete">Delete</button>
        </li>
    `).join("")}let i;e.sectionList.getBoundingClientRect().top;localStorage.getItem("processes")||localStorage.setItem("processes","[]");localStorage.getItem("allProcesses")||localStorage.setItem("allProcesses","[]");h();c();document.addEventListener("click",L);e.backBtn.addEventListener("click",b);e.processInput.addEventListener("focus",L);e.processInput.addEventListener("input",()=>I(P,500));e.processList.addEventListener("click",N);e.taskForm.addEventListener("submit",q);e.startBtn.addEventListener("click",E);e.lapBtn.addEventListener("click",D);e.stopBtn.addEventListener("click",H);e.sendBtn.addEventListener("click",$);e.showListBtn.addEventListener("click",M);document.querySelector(".send-btn-wrap").addEventListener("click",j);window.addEventListener("scroll",J);e.deleteTotalBtn[0]&&e.totalList.addEventListener("click",C);e.navName.innerHTML=JSON.parse(localStorage.getItem("log")).user;async function L(){const t=await p();e.processList.innerHTML=g(t),e.processInput===document.activeElement?(e.taskForm.style.overflow="visible",e.processList.classList.remove("visually-hidden")):(e.taskForm.style.overflow="hidden",e.processList.classList.add("visually-hidden"))}function N(t){const s=t.target.textContent.trim();e.processInput.value=s}async function P(){const t=e.processInput.value,o=(await p()).filter(n=>n.name.toLowerCase().includes(t.toLowerCase())),a=g(o);e.processList.innerHTML=a}async function q(t){t.preventDefault();const s=e.processInput.value,a=(await p()).find(n=>n.name===s);a?localStorage.setItem("process",JSON.stringify(a)):m("Please, choose a process from list.","#"),d(e.startBtn),c()}function J(){const t=window.scrollY;e.processesSaveBtn&&t>=200?e.processesSaveBtn.classList.remove("button-hidden"):e.processesSaveBtn.classList.add("button-hidden")}function c(){const t=JSON.parse(localStorage.getItem("process")),s=JSON.parse(localStorage.getItem("processes")),o=JSON.parse(localStorage.getItem("allProcesses"));if(w(s),o.length<=0?(e.totalList.innerHTML='<p class="empty-message">List is empty</p>',e.sendBtnWrap.innerHTML="",document.querySelector(".total-quantity").classList.add("visually-hidden"),document.querySelector(".total-quantity-number").innerHTML=0):(e.totalList.innerHTML=T(o),e.sendBtnWrap.innerHTML='<button class="send-total-btn active-btn">Send</button>',document.querySelector(".total-quantity").classList.remove("visually-hidden"),document.querySelector(".total-quantity-number").innerHTML=o.length),!t){clearInterval(i),e.taskForm.classList.remove("task-form-hidden"),r(e.startBtn),r(e.lapBtn),r(e.stopBtn),e.username.innerHTML=`Hi ${u()},`,e.taskFormDescription.innerHTML='Before you begin, please enter the name of the task in the box below and click on the "Save" button.';return}if(e.editWrap.innerHTML=`<button type="button" class="edit-btn"><img class="edit-icon" src="${k}"/></button>`,document.querySelector(".edit-btn").disabled=!0,document.querySelector(".edit-btn").style.visibility="hidden",t.startDate&&!i?(i=setInterval(()=>{const a=Date.now()-t.startDate;S(a)},10),r(e.startBtn),d(e.lapBtn),d(e.stopBtn)):t.startDate||(r(e.lapBtn),r(e.stopBtn),d(e.startBtn),document.querySelector(".edit-btn").disabled=!1,document.querySelector(".edit-btn").style.visibility="visible"),e.taskForm.classList.add("task-form-hidden"),e.username.innerHTML=`Great ${u()}!`,e.taskFormDescription.innerHTML=`The process you'll be timing is "${B().name}".`,document.querySelector(".edit-btn").addEventListener("click",O),document.querySelector(".list-btns-processes").classList.remove("btns-list-visible"),s.length>=t.steps.length){clearInterval(i);const a=JSON.parse(localStorage.getItem("process"));delete a.startDate,localStorage.setItem("process",JSON.stringify(a)),document.querySelector(".list-btns-processes").classList.add("btns-list-visible"),r(e.startBtn),r(e.lapBtn),d(e.stopBtn)}}function O(){localStorage.removeItem("process"),document.querySelector(".edit-btn").remove(),localStorage.setItem("processes","[]"),c()}function E(){const t=JSON.parse(localStorage.getItem("process"));if(!t){e.taskInput.classList.add("task-input-required"),m("Please, enter the task","#task");return}const s=Date.now();t.startDate=s,localStorage.setItem("process",JSON.stringify(t)),c()}function D(){const t=JSON.parse(localStorage.getItem("process")),s=JSON.parse(localStorage.getItem("processes")),o=JSON.parse(localStorage.getItem("log"));e.watch.classList.add("push-watch"),setTimeout(()=>{e.watch.classList.remove("push-watch")},200);const a=Date.now(),n=s.length,f=s.length>0?a-s[n-1].currentTime:a-t.startDate,y={id:v(),step:n+1,user:o.user,time:f,currentTime:a,process:t.name,task:t.steps[n]};s.push(y),localStorage.setItem("processes",JSON.stringify(s)),c()}function H(){const t=JSON.parse(localStorage.getItem("process"));delete t.startDate,localStorage.setItem("process",JSON.stringify(t)),clearInterval(i),i=null,localStorage.setItem("processes","[]"),S(0),c()}function $(){const t=JSON.parse(localStorage.getItem("processes")),s=JSON.parse(localStorage.getItem("allProcesses")),o={id:v(),type:"process-stop-watch",process:t[0].process,items:t};s.push(o),localStorage.setItem("allProcesses",JSON.stringify(s)),localStorage.setItem("processes","[]"),clearTimeout(i),i=null,c()}function M(){document.querySelector("body").style.overflow="hidden",e.hideListBtn.addEventListener("click",F),e.listBackdrop.classList.remove("visually-hidden")}function F(){document.querySelector("body").style.overflow="visible",e.listBackdrop.classList.add("visually-hidden")}function C(t){if(t.target.nodeName!=="BUTTON")return;const s=t.target.id,a=JSON.parse(localStorage.getItem("allProcesses")).filter(n=>n.id!==s);localStorage.setItem("allProcesses",JSON.stringify(a)),setTimeout(()=>{c()},200)}async function j(){e.sendBackdrop.classList.remove("visually-hidden");const t=JSON.parse(localStorage.getItem("allProcesses")),s=[];for(let a of t)a.items.forEach(n=>s.push(n));const o={type:"process-stop-watch",items:s};document.querySelector(".send-btn-wrap").classList.add("visually-hidden");try{const a=await fetch("https://script.google.com/macros/s/AKfycbwQfPNpDsZK7s3qT5Jt8PBS7B2YnK_ILFqPV65fPhuc7J9jd8vJYz4g8oSnoR0GqPSE/exec",{method:"POST",body:JSON.stringify(o)})}catch{m("Oops. Something went wrong.","#")}finally{document.querySelector(".send-btn-wrap").classList.remove("visually-hidden"),e.sendBackdrop.classList.add("visually-hidden")}}
//# sourceMappingURL=commonHelpers4.js.map
